{% extends 'base.html' %}

{% block title %}{{ movie.title }} Details{% endblock %}

{% block content %}
<h1>{{ movie.title }}</h1>

{% comment %} <div class="row">
<div class="col-md-4">
<p><strong>Genre:</strong> {{ movie.genre }}</p>
<p><strong>Release Date:</strong> {{ movie.release_date }}</p>
<p><strong>Description:</strong></p>
<p>{{ movie.description }}</p>

</div>
<div class="col-md-2 justify-content-end">
<img src="{{ movie.image.url }}" alt="{{ movie.title }}">
</div>
</div> {% endcomment %}

<div class="container px-4 text-center">
    <div class="row gx-5">
      <div class="col">
       <div class="p-3 ">
        <p class="text-start"><strong>Genre:</strong> {{ movie.genre }}</p>
        <p class="text-start"><strong>Release Date:</strong> {{ movie.release_date }}</p>
        <p class="text-start"><strong>Description:</strong></p>
        <p class="text-start">{{ movie.description }}</p>
       </div>
      </div>
      
      <div class="col">
        <div class="p-3">
            {% if movie.image %}
            <img src="{{ movie.image.url }}" alt="{{ movie.title }}">
            {% else %}
            <p>No image found for this movie.</p>
            {% endif %}
        </div>
      </div>
 
    </div>
  </div>

<div>
    <h2>Reviews</h2>
    {% if not reviews %}
    <p>No reviews found for this movie.</p>
    {% else %}
    {% for review in reviews %}
        <div class="card mt-3">
            <div class="card-body">
                <h5 class="card-title">{{ review.autor }}</h5>
                <p class="card-text"><strong>Rating:</strong> {{ review.rating }}/5</p>
                <p class="card-text">{{ review.comments }}</p>
                {% if user.is_authenticated %}
                <form action="{% url 'delete_review' review.id %}?page={{ request.GET.page }}" method="POST" style="display:inline;">
                    {% csrf_token %}
                    {% comment %} Seguro que quieres {% endcomment %}
                    <button class="btn btn-danger">
                        Delete Review
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
    {% endfor %}
    {% endif %}
</div>
<!-- Edit Movie -->
{% comment %} <a href="{% url 'edit_movie' movie.id %}" class="btn btn-warning">Edit Movie</a> {% endcomment %}

<!-- Add Review -->
<div class="mt-3">
    <a href="{% url 'add_movie_review' movie.id %}" class="btn btn-info">Add Review</a>

    <!-- Delete Movie -->
    {% comment %} <a href="{% url 'delete_movie' movie.id %}" class="btn btn-danger">Delete Movie</a> {% endcomment %}
    <div class="d-flex justify-content-end">
    <a href="{% url 'list_movies' %}" class="btn btn-secondary">Back to Movie List</a>
    </div>
</div>
{% endblock %}
